<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="个人学习小结"><title>VUE去哪儿网学习笔记3 | zlstory</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-111606593-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">VUE去哪儿网学习笔记3</h1><a id="logo" href="/.">zlstory</a><p class="description">若独学而无友，则孤陋且寡闻</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">VUE去哪儿网学习笔记3</h1><div class="post-meta">Nov 6, 2018</div><div class="post-content"><p>进行项目实战环节</p>
<h1 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h1><ol>
<li><p>安装node webpack github等环境</p>
</li>
<li><p>全局安装脚手架vue-cli</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install --global vue-cli</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用vue-cli构建项目</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vue init webpack travel</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>之后会出现一系列的问题<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">? Project name y</span><br><span class="line">? Project description A Vue.js project</span><br><span class="line">? Author zlstory &lt;13968106594@163.com&gt;</span><br><span class="line">? Vue build standalone</span><br><span class="line">? Install vue-router? Yes</span><br><span class="line">? Use ESLint to lint your code? Yes</span><br><span class="line">? Pick an ESLint preset Standard</span><br><span class="line">? Set up unit tests No</span><br><span class="line">? Setup e2e tests with Nightwatch? No</span><br><span class="line">? Should we run `npm install` for you after the project has been created? (recommended) npm</span><br></pre></td></tr></table></figure></p>
<h1 id="理论知识"><a href="#理论知识" class="headerlink" title="理论知识"></a>理论知识</h1><ol>
<li><p>路由<br>路由就是根据网址不同，返回不同的内容给用户</p>
</li>
<li><p>@符号表示src目录下</p>
</li>
<li><p>路由的配置文件放在router文件夹下的index.js中</p>
</li>
<li><p>多页应用：页面之间的跳转，返回的是html，优点是首屏时间快，seo效果好。缺点是：页面之间切换慢。</p>
<p>单页应用：页面跳转并不是跳转到另一个html，而是通过js删除本页面的dom，加载新的dom。优点是页面切换快，缺点是首屏时间稍慢，seo差。</p>
</li>
</ol>
<h1 id="禁用eslint"><a href="#禁用eslint" class="headerlink" title="禁用eslint"></a>禁用eslint</h1><p>在webpack.base.conf.js注释代码<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createLintingRule = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  test: <span class="regexp">/\.(js|vue)$/</span>,</span><br><span class="line">  loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">  enforce: <span class="string">'pre'</span>,</span><br><span class="line">  include: [resolve(<span class="string">'src'</span>), resolve(<span class="string">'test'</span>)],</span><br><span class="line">  options: &#123;</span><br><span class="line">    formatter: <span class="built_in">require</span>(<span class="string">'eslint-friendly-formatter'</span>),</span><br><span class="line">    emitWarning: !config.dev.showEslintErrorsInOverlay</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>或者在index.js中：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">useEslint: <span class="literal">false</span>,</span><br></pre></td></tr></table></figure></p>
<h1 id="项目实践"><a href="#项目实践" class="headerlink" title="项目实践"></a>项目实践</h1><ol>
<li><p>改变meta标签，使其适配于移动端</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用reset.css清除浏览器默认样式。在assets文件夹中放入静态资源。在main.js中import进去。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">import './assets/styles/reset.css'</span><br></pre></td></tr></table></figure>
</li>
<li><p>为了解决1像素问题，引入文件：border.css</p>
</li>
<li><p>解决移动端点击延迟问题：引入fastclick.js<br>使用<code>npm install fastclick --save</code><br>在mian.js中引入并使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> fastClick <span class="keyword">from</span> <span class="string">'fastclick'</span></span><br><span class="line">fastClick.attach(<span class="built_in">document</span>.body)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在index.js中配置页面路由</p>
<p>src目录下新建pages文件夹，在index.js中按需引入</p>
</li>
<li><p>在项目中使用stylus：<code>npm install stylus --save</code>、<code>npm install stylus-loader --save</code>。<br> 然后在style中定义<code>lang=stylus</code>即可</p>
</li>
</ol>
<ol start="7">
<li><p>在pages/home的文件夹中新建components文件夹，放入Header.vue。是home顶部的组件，然后在Home.vue中使用Header.vue:先引入再注册后使用(注意大小写问题)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;home-header&gt;<span class="xml"><span class="tag">&lt;/<span class="name">home-header</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">import</span> HomeHeader <span class="keyword">from</span> <span class="string">'./components/Header'</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">      name: <span class="string">'Home'</span>,</span><br><span class="line">      components:&#123;</span><br><span class="line">          HomeHeader</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>开发HomeHeader组件。<br> 使用rem布局：在reset.css中定义html为50px，所以header本来为43px的高度，则为0.86rem</p>
</li>
<li><p>使用iconfont，在main.js中import入iconfont.css(因为多个页面都需要引入iconfont)</p>
</li>
<li><p>为主题颜色写一个公用的css：varibles.styl 为css主题色定义变量，在所需页面中引入即可，方便以后改变主题颜色</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 在varibles.styl */</span></span><br><span class="line">$bgColor = #00bcd4</span><br><span class="line">$darkTextColor = #333</span><br><span class="line">$headerHeight = .86rem</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 在所需页面中先引入再使用 */</span></span><br><span class="line">&lt;style lang="stylus" scoped&gt;</span><br><span class="line">    @<span class="keyword">import</span> <span class="string">'../../../assets/styles/varibles'</span></span><br><span class="line">    .header</span><br><span class="line">        display flex</span><br><span class="line">        height <span class="number">0.86rem</span></span><br><span class="line">        line-height <span class="number">0.86rem</span></span><br><span class="line">        color #fff</span><br><span class="line">        background $bgColor</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>由于上面的路径太长了，所以我们可以使用@符号(代表src目录)，需要注意的是在css中引入其他的css，想用@符号时，需在@符号或者别名前面加一个~<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">'~@/assets/styles/varibles'</span></span><br></pre></td></tr></table></figure></p>
<p>也可以自定义一个别名来代表assets的styles目录,在webpack.base.conf.js中进行配置<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">   extensions: [<span class="string">'.js'</span>, <span class="string">'.vue'</span>, <span class="string">'.json'</span>],</span><br><span class="line">   alias: &#123;</span><br><span class="line">     <span class="string">'vue$'</span>: <span class="string">'vue/dist/vue.esm.js'</span>,</span><br><span class="line">     <span class="string">'@'</span>: resolve(<span class="string">'src'</span>),</span><br><span class="line">     <span class="string">'styles'</span>: resolve(<span class="string">'src/assets/styles'</span>),</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<ol start="11">
<li>使用插件进行首页轮播图的开发：github上搜索：vue-awesome-swiper<br>先安装再看文档后使用(全局使用)<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install vue-awesome-swiper@2.6.7 --save</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>遇见的坑：在import中引入时出现找不到该模块的声明文件。</p>
<ol start="12">
<li><p>新建swiper.vue进行开发</p>
<p>优化：当网速较慢，图片未加载完成的时候，页面会有抖动。解决办法：swiper外层加一个div.wrapper。再使用css：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.wrapper</span><br><span class="line">    overflow hidden</span><br><span class="line">    width 100%</span><br><span class="line">    height 0</span><br><span class="line">    padding-bottom 26.67%</span><br><span class="line">or</span><br><span class="line"> .wrapper</span><br><span class="line">    overflow hidden</span><br><span class="line">    height 26.67vw</span><br></pre></td></tr></table></figure>
<p>数值是轮播图片的高除以宽得到的</p>
</li>
<li><p>改变swiper的pagination默认样式：&gt;&gt;&gt; 样式穿透  为了不受scoped的限制</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &gt;&gt;&gt; <span class="selector-class">.swiper-pagination-bullet-active</span>&#123;</span><br><span class="line">    background #ffffff</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>为了使icons能够左右滑动，需要借用computed来计算icon是否需要第二页显示。直接在computed中计算就好。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    pages() &#123;</span><br><span class="line">        <span class="keyword">const</span> pages = []</span><br><span class="line">        <span class="keyword">this</span>.iconList.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> page = <span class="built_in">Math</span>.floor(index / <span class="number">8</span>) <span class="comment">//看数据到底展示在哪一页,从0开始</span></span><br><span class="line">            <span class="keyword">if</span> (!pages[page]) &#123; <span class="comment">//如果不存在(一开始的情况)</span></span><br><span class="line">                pages[page] = []</span><br><span class="line">            &#125;</span><br><span class="line">            pages[page].push(item)<span class="comment">//将item放入pages中</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> pages</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这段代码是为了将data中的iconlists拆分成两个数组。使用vue.js devTools插件可以看得更加清楚<br>然后在template中循环pages相关内容就完成了。</p>
<ol start="15">
<li>使用minxin封装一个 内容太多显示…的css<br>在mixins.styl中<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ellipsis</span>()</span><br><span class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span></span><br><span class="line">  <span class="selector-tag">white-space</span>: <span class="selector-tag">nowrap</span></span><br><span class="line">  <span class="selector-tag">text-overflow</span>: <span class="selector-tag">ellipsis</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>使用：先引入该文件 再在所需的样式表中<code>ellipsis()</code>即可</p>
<ol start="16">
<li><p>在stylus中，通过@import引入的必须是.styl文件，.css文件在index.html中引入，否则报错</p>
</li>
<li><p>开发recommend模板以及weekend模板</p>
</li>
<li><p>由于很多子组件中都需要数据，需要发送ajax请求，而子组件都是显示在home.vue中，所以可以直接在home.vue中发送ajax请求。</p>
</li>
</ol>
<p>将json文件放在static文件夹中，因为在vue-cli生成的所有文件夹中只有static可以被外部(浏览器中输入路径)访问到。</p>
<ol start="19">
<li>本地将所有模拟数据都是放在mock文件夹中的，所以axios的请求路径是’/static/mock/index.json’,但是线上版本应该是’/api/index.json’,当我们在本地模拟的时候与上线路径不一致，而在上线前改变代码也是一件非常危险的事情，所以我们需要使用vue代理将请求路径保持一致。</li>
</ol>
<p>打开config文件夹中的index.js(此功能由webpack-dev-server提供)<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">proxyTable: &#123;</span><br><span class="line">    <span class="string">'/api'</span>: &#123;</span><br><span class="line">    target: <span class="string">'http://localhost:8080'</span>,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">        <span class="string">'^/api'</span>: <span class="string">'/static/mock'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>更改配置文件之后，需要重新启动服务器。</p>
<ol start="20">
<li><p>在home.vue中通过axios得到所有数据，现在需要通过父子组件传值来将数据传到各个子组件中</p>
</li>
<li><p>进行城市选择开发页面，需要配置index.js中的路由信息.</p>
<p>当我们在头部(home/header.vue)中点击城市选择的时候，会调到city组件，所以在header.vue的header-right部分使用router-link</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/city"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header-right"</span>&gt;</span>&#123;&#123;this.city&#125;&#125;<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"iconfont arrow-icon"</span>&gt;</span>&amp;#xe64a;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="22">
<li><p>开发city组件时，新建<code>page/city/city.vue</code>，然后开发<code>page/city/components/CityHeader.vue</code>。(较为简单无技巧)</p>
</li>
<li><p>开发city中的搜索框界面:当给input给左右内边距时，需要设置</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.search-input</span>&#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>:border-box</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>控制页面上的1像素边框问题</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.border-topbottom</span></span><br><span class="line">   &amp;<span class="selector-pseudo">:before</span></span><br><span class="line">       <span class="selector-tag">border-color</span> <span class="selector-id">#ccc</span></span><br><span class="line">   &amp;<span class="selector-pseudo">:after</span></span><br><span class="line">       <span class="selector-tag">border-color</span> <span class="selector-id">#ccc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>开始列表布局(复杂项)，新建list.vue<br>(1) 新建三个area，分别是当前城市，热门城市，以A开头的城市，完善布局之后，使用better-scroll</p>
</li>
</ol>
<p>(2) 安装better-scroll</p>
<pre><code>使用的时候首先要符合bs规定的dom结构(不一定是ul标签)
</code></pre><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- you can put some other DOMs here, it won't affect the scrolling --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<pre><code>然后引入Bscroll,在页面挂载成功之后使用(wrapper是最外层dom的ref)
</code></pre><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> mounted() &#123;</span><br><span class="line">    <span class="keyword">this</span>.scroll = <span class="keyword">new</span> BScroll(<span class="keyword">this</span>.$refs.wrapper)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单的滚动完成</p>
<ol start="26">
<li><p>开发左边字母表组件(alphabet.vue)</p>
</li>
<li><p>动态渲染city组件啦！<br>在city.vue组件中，使用axios.get获取城市列表，然后父子组件传值到city-list组件中。</p>
</li>
</ol>
<p>循环中再循环了解一下:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"area"</span> <span class="attr">v-for</span>=<span class="string">"(item,key) of cities"</span> <span class="attr">:key</span>=<span class="string">"key"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title border-topbottom"</span>&gt;</span>&#123;&#123;key&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item border-bottom"</span> <span class="attr">v-for</span>=<span class="string">"innerItem of item"</span> <span class="attr">:key</span>=<span class="string">"innerItem.id"</span>&gt;</span></span><br><span class="line">            &#123;&#123;innerItem.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ol start="28">
<li><p>兄弟组件联动：点击右边字母表，左边滑动到对应的位置</p>
<p>思路：将alphabet.vue中的字母通过点击事件拿到对应的innerText，将其传值给兄弟组件list.vue(先将alphabet.vue中的值传递给父组件city.vue,再将数据从city.vue中传递给list.vue)</p>
<p>alphabet.vue:在字母表的item中绑定一个点击事件,向外触发事件</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> handleLetterClick(e)&#123;</span><br><span class="line">    <span class="keyword">this</span>.$emit(<span class="string">'change'</span>,e.target.innerText)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>city.vue：监听子组件传递过来的change事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">city-alphabet</span> <span class="attr">:cities</span>=<span class="string">"cities"</span> @<span class="attr">change</span>=<span class="string">"handleLetterChange"</span>&gt;</span><span class="tag">&lt;/<span class="name">city-alphabet</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在methods中定义<code>handleLetterChange</code>事件,然后将letter传值给list.vue</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">handleLetterChange(letter) &#123;</span><br><span class="line">       <span class="comment">//拿到alphabet.vue中的字母值。</span></span><br><span class="line">       <span class="built_in">console</span>.log(letter)</span><br><span class="line">       <span class="keyword">this</span>.letter = letter</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>当list.vue拿到点击的letter值时，思路：当letter改变时，我们需要找到对应字母的列表。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    letter: <span class="built_in">String</span></span><br><span class="line">&#125;</span><br><span class="line">watch: &#123;</span><br><span class="line">    letter() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.letter)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后通过调用better-scroll提供的<code>scrollToElement()</code>方法控制左边列表滚动到对应的列表上面</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"area"</span> <span class="attr">v-for</span>=<span class="string">"(item,key) of cities"</span> <span class="attr">:key</span>=<span class="string">"key"</span> <span class="attr">:ref</span>=<span class="string">"key"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title border-topbottom"</span>&gt;</span>&#123;&#123;key&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item border-bottom"</span> <span class="attr">v-for</span>=<span class="string">"innerItem of item"</span> <span class="attr">:key</span>=<span class="string">"innerItem.id"</span>&gt;</span></span><br><span class="line">            &#123;&#123;innerItem.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    letter() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.letter) &#123;</span><br><span class="line">            <span class="keyword">const</span> element = <span class="keyword">this</span>.$refs[<span class="keyword">this</span>.letter][<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">this</span>.scroll.scrollToElement(element,<span class="number">400</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>右侧字母表监听滚动事件<br>思路:获得字母A到顶部的距离，当滑动的时候获取手指距离顶部的高度，得到差值之后除以字母之间的高度。这样就知道当前是第几个字母了。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">handleTouchMove(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.touchStatus) &#123;</span><br><span class="line">        <span class="keyword">const</span> startY = <span class="keyword">this</span>.$refs[<span class="string">'A'</span>][<span class="number">0</span>].offsetTop</span><br><span class="line">        <span class="keyword">const</span> touchY = e.touches[<span class="number">0</span>].clientY - <span class="number">79</span></span><br><span class="line">        <span class="keyword">const</span> index = Math.floor((touchY - startY) / <span class="number">20</span>)</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; <span class="keyword">this</span>.letters.length) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$emit(<span class="string">'change'</span>, <span class="keyword">this</span>.letters[index])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述写法是比较耗性能的，因为offsetTop一直在改变。所以使用updated钩子函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">updated() &#123;</span><br><span class="line">       <span class="keyword">this</span>.startY = <span class="keyword">this</span>.$refs[<span class="string">'A'</span>][<span class="number">0</span>].offsetTop</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<p>再进行函数节流：延迟16毫秒去执行</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">handleTouchMove(e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.touchStatus) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.timer) &#123;</span><br><span class="line">            clearTimeout(<span class="keyword">this</span>.timer)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> touchY = e.touches[<span class="number">0</span>].clientY - <span class="number">79</span></span><br><span class="line">            <span class="keyword">const</span> index = <span class="built_in">Math</span>.floor((touchY - <span class="keyword">this</span>.startY) / <span class="number">20</span>)</span><br><span class="line">            <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; <span class="keyword">this</span>.letters.length) &#123;</span><br><span class="line">                <span class="keyword">this</span>.$emit(<span class="string">'change'</span>, <span class="keyword">this</span>.letters[index])</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">16</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>在城市选择的时候，点击搜索框，根据用户输入信息实时显示所匹配的信息。</p>
<p>首先通过父子组件之间传值获取到所有cities的数据，然后通过v-model的双向数据绑定去获取到用户的值，再与cities中的数据进行匹配</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> result = []</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> <span class="keyword">this</span>.cities) &#123;</span><br><span class="line">    <span class="keyword">this</span>.cities[i].forEach(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (value.spell.indexOf(<span class="keyword">this</span>.keyword) &gt; <span class="number">-1</span> || value.name.indexOf(<span class="keyword">this</span>.keyword) &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">            result.push(value)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.list = result</span><br></pre></td></tr></table></figure>
<ol start="31">
<li><p>熟悉vuex</p>
<p>因为city.vue与home.vue之间是没有共同父组件的，如果要进行两个组件之间的通信的话，可以使用vue官方推荐的vuex(数据框架)</p>
<p>为什么需要vuex(设计理念)：</p>
<p>当我们的项目中有多个页面或者是多个组件之间进行复杂的数据传值很困难的时候，可以将公用的数据放在公共的存储空间去存储，当我们在某一个组件中改变数据的时候，其他组件就可以感知到数据的变化。</p>
<p>图解：<br>vuex由哪几部分组成：</p>
<p>state：存储公用数据，需要公用数据的时候，直接调用state就好了</p>
<pre><code>当我们需要改变数据的时候,我们不能用组件(Vue components)直接改变数据，需要走一个流程：
    (1)如果有异步操作、复杂的同步操作、批量的同步操作，我们将异步操作放在actions中，
    Vue components -&gt; Actions -&gt; Mutations -&gt; Satate
    或者 Vue components -&gt; Mutations -&gt; Satate
</code></pre></li>
<li><p>在项目中使用vuex<br>本应该在main.js中引入vuex的，但是为了更方便管理，我们将其放在新的位置<br>在src目录下新建store文件夹，在该文件夹下新建index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: <span class="string">'北京'</span>  <span class="comment">//在city组件和home组件中关联起来的一个值</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后在main.js中<code>import store from &#39;./store&#39;</code><br>并在根组件中注册store</p>
<ol start="33">
<li>注册store之后，现在开始使用store中的数据</li>
</ol>
<p>home.vue中以前home-header组件中的city值是由外部传入进去的，现在我们并不需要后端传值给我们了，而是由前端存储的，所以删掉<code>:city = &quot;city&quot;</code>以及data中的city默认值</p>
<p>header.vue中之前关于接收city的props也可以删掉了，而使用<code></code>拿到我们刚刚在store中存储的值</p>
<ol start="34">
<li><p>改变state：在城市选择的列表里，点击哪个城市，state值就为哪个城市。</p>
<p>在list.vue中给热门城市的item绑定一个handleCityClick事件，使用dispatch方法改变actions</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> methods: &#123;</span><br><span class="line">    handleCityClick(city) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$store.dispatch(<span class="string">'changeCity'</span>, city)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>又因为改变的actions，所以我们需要在刚刚的store/index中添加一个actions，并接收两个参数<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: <span class="string">'杭州'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    changeCity(ctx, city)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(city)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>actions又通过commit方法来调用mutations去改变公共数据，所以又需要新建一个mutations<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: <span class="string">'杭州'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    changeCity(ctx, city)&#123;</span><br><span class="line">        ctx.commit(<span class="string">'changeCity'</span>,city)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations:&#123;</span><br><span class="line">    changeCity(state,city)&#123;</span><br><span class="line">        state.city = city</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>正常流程是以上步骤，但是由于本项目开发是没有异步数据也没有批量处理同步数据，所以我们可以不走actions这一步，那么做出的改变就是<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//list.vue</span></span><br><span class="line"> methods: &#123;</span><br><span class="line">    handleCityClick(city) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$store.commit(<span class="string">'changeCity'</span>, city)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: <span class="string">'杭州'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations:&#123;</span><br><span class="line">    changeCity(state,city)&#123;</span><br><span class="line">        state.city = city</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>然后在所需点击地方加入对应的方法即可。</p>
<ol start="35">
<li><p>在点击对应的城市完毕时，返回首页内容(vue-router)，使用router.push</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> handleCityClick(city) &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">'changeCity'</span>, city)</span><br><span class="line">    <span class="keyword">this</span>.$router.push(<span class="string">'/'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>vuex的高级使用以及localstorage</p>
</li>
</ol>
<p>把组件的共享状态抽取出来，以一个全局单例模式管理</p>
<p>当我们选择城市时，在进行一次刷新操作，页面又变成了默认的城市，所以我们需要用localstorage去存储数据，这样子我们下一次进入该网站时也是上一次选择的城市。</p>
<p>需要改变index.js中的内容(比较简单),直接使用localstorage就可以了<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: localStorage.city || <span class="string">'杭州'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    changeCity(state, city) &#123;</span><br><span class="line">      state.city = city</span><br><span class="line">      localStorage.city = city</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>当某一些用户使用隐身模式或者禁用了本地存储功能，为了使代码正常运行，我们需要在所有localstorage外层包裹一层try catch<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> defaultCity = <span class="string">'上海'</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (localStorage.city) &#123;</span><br><span class="line">    defaultCity = localStorage.city</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    city: defaultCity</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    changeCity(state, city) &#123;</span><br><span class="line">      state.city = city</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        localStorage.city = city</span><br><span class="line">      &#125;<span class="keyword">catch</span>(e)&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>在实际项目中，为了使代码更加规范易懂以及更方便维护，所以我们会再建立state.js与mutations.js,然后将index.js代码拆分出来<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//state.js</span></span><br><span class="line"><span class="keyword">let</span> defaultCity = <span class="string">'上海'</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (localStorage.city) &#123;</span><br><span class="line">    defaultCity = localStorage.city</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    city: defaultCity</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mutations.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  changeCity(state, city) &#123;</span><br><span class="line">    state.city = city</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      localStorage.city = city</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">'./state'</span></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'./mutations'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<ol start="37">
<li>mapState<br>由于页面中的<code>this.$store.state.city</code>太长了，所以我们可以使用vuex提供的api<code>mapState</code><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">'HomeHeader'</span>,</span><br><span class="line">    computed:&#123;</span><br><span class="line">        ...mapState([<span class="string">'city'</span>])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这样在页面中使用<code></code>即可</p>
<p>同理{mapMutations}也是先引入再使用，使代码看起来更加简洁。</p>
<ol start="38">
<li>使用keep-alive优化性能<br>由于切换路由的时候，组件都会被重新渲染，导致mouted()钩子会重新执行，所以每一次都会发送请求。</li>
</ol>
<p>但是项目中的json数据并无改变，所以我们可以在app.vue中使用keep-alive</p>
<p>使用keep-alive之后，monted()不会执行，但是actived()会执行，所以需要处理什么，可以放在actived钩子函数之中</p>
<p>actived():当页面重新被显示的时候执行</p>
<ol start="39">
<li>开发详情页</li>
</ol>
<p>在recommend.vue中使用router-link标签来进行页面跳转并进行参数的传递<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"'/detail' + item.id"</span> <span class="attr">tag</span>=<span class="string">'li'</span>&gt;</span></span><br><span class="line">   ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<ol start="40">
<li><p>在src目录下新建common文件夹，放入的是公用的组件,并在webpack.base.config.js中为此目录创建一个别名</p>
</li>
<li><p>在vue开发时，需要注意的是解绑全局事件。如果是对某个标签的事件进行绑定，那么将不会造成影响。但是如果事件是window事件的话将会对其他页面造成一定的影响，所以我们需要进行全局事件的解绑<br>当在组件中使用keep-alive时，此组件会多出一个actived()钩子函数，在每次页面展示的时候会执行。与之对应的会有另一个生命钩子函数叫做deactivated(),在页面即将被隐藏的时候执行。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> activated() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.handleScroll)</span><br><span class="line">&#125;,</span><br><span class="line">deactivated() &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">'scroll'</span>, <span class="keyword">this</span>.handleScroll)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用递归组件：在组件自身调用组件自身<br>数据格式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">list: [&#123;</span><br><span class="line">        title: <span class="string">"成人票"</span>,</span><br><span class="line">        children:[&#123;</span><br><span class="line">            title:<span class="string">"成人三馆联票"</span>,</span><br><span class="line">            children:[&#123;</span><br><span class="line">                title:<span class="string">"成人三馆联票-某连锁销售"</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            title:<span class="string">"成人五馆联票"</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        title: <span class="string">"学生票"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        title: <span class="string">"特惠票"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        title: <span class="string">"儿童票"</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span> <span class="attr">v-for</span>=<span class="string">"(item,index) of list"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item-title border-bottom"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"item-title-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;&#123;item.title&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"item.children"</span> <span class="attr">class</span>=<span class="string">"item-children"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">detail-list</span> <span class="attr">:list</span>=<span class="string">"item.children"</span>&gt;</span><span class="tag">&lt;/<span class="name">detail-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="43">
<li>通过不同id值传参给后端</li>
</ol>
<p>在index.js中设置动态路由的时候，会将动态的id以参数的形式设置好<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Home'</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/city'</span>,</span><br><span class="line">      name: <span class="string">'City'</span>,</span><br><span class="line">      component: City</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/detail/:id'</span>,</span><br><span class="line">      name: <span class="string">'Detail'</span>,</span><br><span class="line">      component: Detail</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>在发送请求的时候</p>
<p>传统方式是通过字符串拼接：<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">  getDetailInfo()&#123;</span><br><span class="line">    axios.get(<span class="string">'/api/detail.json?id='</span>+<span class="keyword">this</span>.$route.params.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>更为直观的传参方式</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">getDetailInfo() &#123;</span><br><span class="line">   axios.get(<span class="string">'/api/detail.json'</span>, &#123;</span><br><span class="line">           params: &#123;</span><br><span class="line">               id: <span class="keyword">this</span>.$route.params.id</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</div><div class="tags"><a href="/tags/vue/">vue</a></div><div class="post-nav"><a href="/2018/11/19/environment/" class="pre">重装系统之后的一系列操作</a><a href="/2018/10/18/vue-note3/" class="next">VUE去哪儿网学习笔记2</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'zlstory',
  repo: 'zlstory.github.io',
  oauth: {
    client_id: '2beb49205958bc8a66be',
    client_secret: '1e8e5079085aa3df305c2e00d0ba45a326992962',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/vue-mint-ui/" style="font-size: 15px;">vue mint-ui</a> <a href="/tags/javaScript小知识/" style="font-size: 15px;">javaScript小知识</a> <a href="/tags/JSON/" style="font-size: 15px;">JSON</a> <a href="/tags/canvas/" style="font-size: 15px;">canvas</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/理论/" style="font-size: 15px;">理论</a> <a href="/tags/environment/" style="font-size: 15px;">environment</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/javaScript/" style="font-size: 15px;">javaScript</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/选择器/" style="font-size: 15px;">选择器</a> <a href="/tags/编辑器/" style="font-size: 15px;">编辑器</a> <a href="/tags/vue，vuex/" style="font-size: 15px;">vue，vuex</a> <a href="/tags/vue，websocket/" style="font-size: 15px;">vue，websocket</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/seo/" style="font-size: 15px;">seo</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/12/17/canvas2/">canvas学习笔记——高级篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/17/git443/">git报错443</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/16/canvas/">canvas学习笔记——基础篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/21/iframeInVue/">在vue中使用iframe</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/03/websocket/">在vue-cli中使用websocket</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/17/eventBus/"> Vue组件中eventBus使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/21/vue-parent-child/">vue中父子组件传值的几种方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/20/vuex/">vuex的学习总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/26/mint-ui-login/">mintLogin</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/12/vueTheory/">vue的知识点</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://sinsle.com/" title="异　见" target="_blank">异　见</a><ul></ul><a href="https://www.wujiabk.com" title="吴佳博客" target="_blank">吴佳博客</a><ul></ul><a href="http://www.jackeybiao.com/" title="韩彪博客" target="_blank">韩彪博客</a><ul></ul><a href="http://xiangnick.website/" title="XiangNick" target="_blank">XiangNick</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">zlstory.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?68cb98bd2a475f71ad8508d14ad906ba";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>